<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.futeplus.vms.dao.BdDao">

	<!-- 新增BD人员信息 -->
	<insert id="addBd" useGeneratedKeys="true" keyProperty="id" parameterType="com.futeplus.vms.entity.BdInfo">
		insert into bdInfo(bdId,openId,boss,fullname,username,pwd,createTime,accountState)
		values(#{bdId},#{openId},#{boss},#{fullname},#{username},#{pwd},#{createTime},#{accountState})
	</insert>
	
	<!-- 更新BD人员信息 -->
	<update id="updateBd" parameterType="com.futeplus.vms.entity.BdInfo">
		update bdInfo set boss=#{boss},fullname=#{fullname},username=#{username},pwd=#{pwd}
		,accountState=#{accountState} where id=#{id}
	</update>
	
	<!-- 加载所有人员信息 -->
	<select id="loadAllBd" resultType="com.futeplus.vms.entity.BdInfo">
		select t.id,t.boss,t.fullname,t.username,t.pwd,t.createTime
		,(select dictName from dictInfo where dictCode='bd_account_state' and dictValue=t.accountState) as accountState
		from bdInfo t order by boss,createTime desc
	</select>
	
	<!-- 通过BD手机号码加载人员信息 -->
	<select id="loadBdByUsername" resultType="com.futeplus.vms.entity.BdInfo">
		select * from bdInfo where username=#{username}
	</select>
	
	<!-- 加载BD人员详细信息 -->
	<select id="getBd" resultType="com.futeplus.vms.entity.BdInfo">
		select * from bdInfo where id=#{id}
	</select>
	<!-- 加载BD人员详细信息 -->
	<select id="getBdInfo" resultType="com.futeplus.vms.entity.BdInfo">
		select * from bdInfo where fullname=#{fullname}
	</select>

	<!-- 加载所有BD人员信息 -->
	<select id="loadAllBdFullName" resultType="java.util.HashMap">
		select id,fullname from bdInfo order by fullname
	</select>
	
</mapper>  
